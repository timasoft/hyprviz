---
weight: 7
title: Правила окон
---

> [!NOTE]
> Переведено с en с помощью Qwen3.5-Plus

> [!WARNING]
> Правила оцениваются сверху вниз, поэтому порядок их написания имеет значение!
> Дополнительная информация в разделе [Примечания](#notes)

## Правила окон

Вы можете устанавливать правила окон для достижения различного поведения окон на основе
их свойств.

### Синтаксис

Синтаксис базовых именованных правил:
```ini
windowrule {
  name = apply-something
  match:class = my-window

  border_size = 10
}
```

Синтаксис базовых анонимных правил:
```ini
windowrule = match:class my-window, border_size 10
```

Правила делятся на две категории параметров: _props_ и _effects_. Props
— это части `match:`, которые используются для определения того, должно ли окно получить
правило. Effects — это то, что применяется.

_Все_ props должны совпадать, чтобы правило было применено.

Вы можете иметь столько props и effects на правило, сколько пожелаете, в любом порядке, при условии, что:
- есть только один одного типа (например, указание `match:class` дважды недопустимо)
- есть хотя бы один _prop_

### Свойства

Поддерживаемые поля для props:

| Поле | Аргумент | Описание |
|--------------|---------------|---|
| match:class | [RegEx] | Окна с `class`, соответствующим `RegEx`. |
| match:title | [RegEx] | Окна с `title`, соответствующим `RegEx`. |
| match:initial_class | [RegEx] | Окна с `initialClass`, соответствующим `RegEx`. |
| match:initial_title |[RegEx] | Окна с `initialTitle`, соответствующим `RegEx`. |
| match:tag | [name] | Окна с соответствующим `tag`. |
| match:xwayland | [bool] | Окна Xwayland. |
| match:float | [bool] | Плавающие окна. |
| match:fullscreen | [bool] | Полноэкранные окна. |
| match:pin | [bool] | Закреплённые окна. |
| match:focus | [bool] | Текущее активное окно. |
| match:group | [bool] | Группированные окна. |
| match:modal | [bool] | Модальные окна (например, всплывающие окна "Вы уверены") |
| match:fullscreen_state_client | [client] | Окна с соответствующим `fullscreenstate`. `client` может быть `0` - нет, `1` - максимизация, `2` - полноэкранный режим, `3` - максимизация и полноэкранный режим. |
| match:fullscreen_state_internal | [internal] | Окна с соответствующим `fullscreenstate`. `internal` может быть `0` - нет, `1` - максимизация, `2` - полноэкранный режим, `3` - максимизация и полноэкранный режим. |
| match:workspace | [workspace] | Окна на соответствующем рабочем пространстве. `w` может быть `id`, `name:string` или `workspace selector`. |
| match:content | [int] | Окна с указанным типом контента (none = 0, photo = 1, video = 2, game = 3) |
| match:xdg_tag | [RegEx] | Сопоставление окна по его xdgTag (см. `hyprctl clients`, чтобы проверить, есть ли он) |

Имейте в виду, что вы _должны_ объявить хотя бы одно поле, но не все.

> [!NOTE]
> Чтобы получить больше информации о классе окна, заголовке, статусе XWayland или его
> размере, вы можете использовать `hyprctl clients`.


> [!NOTE]
> В выводе команды `hyprctl clients`:
> `fullscreen` относится к `fullscreen_state_internal` и
> `fullscreenClient` относится к `fullscreen_state_client`

### Написание регулярных выражений

Обратите внимание, что Hyprland использует [RE2 от Google](https://github.com/google/re2) для разбора регулярных выражений. Это означает, что все операции, требующие полиномиального
времени для вычисления, не будут работать. См. [вики RE2](https://github.com/google/re2/wiki/Syntax) для поддерживаемых расширений.

Если вы хотите _отрицать_ регулярное выражение, то есть пропускать только когда регулярное выражение _не соответствует_, вы можете добавить префикс `negative:`, например: `negative:kitty`.

## Эффекты

### Статические эффекты

Статические эффекты оцениваются один раз при открытии окна и больше никогда. Это по сути означает, что это всегда будут `initialTitle` и `initialClass`, которые будут найдены при сопоставлении по `title` и `class` соответственно.

> [!WARNING]
> Невозможно применить `float` (или любое другое статическое правило) к окну на основе изменения `title` после создания окна. Это относится ко всем статическим эффектам, перечисленным здесь.

| Эффект | аргумент | Описание |
|----|-----------|---|
| float | [on] | Переводит окно в плавающий режим. |
| tile | [on] |Переводит окно в плиточный режим. |
| fullscreen | [on] | Переводит окно в полноэкранный режим. |
| maximize | [on] | Максимизирует окно. |
| fullscreen_state | [internal] [client]  | Устанавливает полноэкранный режим окна и тот, который отправляется клиенту, где internal и client могут быть `0` - нет, `1` - максимизация, `2` - полноэкранный режим, `3` - максимизация и полноэкранный режим. |
| move  | [expr] [expr] | Перемещает плавающее окно в заданную координату, локальную для монитора. Два выражения разделены пробелом. |
| size | [expr] [expr] | Изменяет размер плавающего окна до заданного размера. Два выражения разделены пробелом. |
| center | [on] | Если окно плавающее, центрирует его на мониторе. |
| pseudo | [on] | Переводит окно в псевдо-режим. |
| monitor | [id] | Устанавливает монитор, на котором должно открываться окно. `id` может быть либо номером идентификатора, либо именем (например, `1` или `DP-1`). |
| workspace | [w] | Устанавливает рабочее пространство, на котором должно открываться окно (для синтаксиса рабочего пространства см. [диспетчеры->workspaces](../Dispatchers#workspaces)). <br> Вы также можете установить [w] в `unset`. Это отменит все предыдущие правила рабочего пространства, применённые к этому окну. Кроме того, вы можете добавить `silent` после рабочего пространства, чтобы окно открывалось без переключения. |
| no_initial_focus | [on] | Отключает начальный фокус на окне |
| pin | [on] | Закрепляет окно (то есть показывает его на всех рабочих пространствах). _Примечание: только для плавающих окон_. |
| group | [options] | Устанавливает свойства группы окон. См. примечание ниже. |
| suppress_event | [types...] | Игнорирует определённые события от окна. События разделены пробелом и могут быть: `fullscreen`, `maximize`, `activate`, `activatefocus`, `fullscreenoutput`. |
| content | [none|photo|video|game] | Устанавливает тип контента. |
| no_close_for | [ms] | Делает окно недоступным для закрытия с помощью диспетчера `killactive` в течение заданного количества миллисекунд при открытии. |

#### Выражения

Выражения разделены пробелом, поэтому в вашей математике не может быть пробелов. Это обычные математические выражения с несколькими открытыми переменными,
имена которых говорят сами за себя. Все переменные позиции локальны для монитора.

- `monitor_w` и `monitor_h` для размера монитора
- `window_x` и `window_y` для позиции окна
- `window_w` и `window_h` для размера окна
- `cursor_x` и `cursor_y` для позиции курсора

Примеры выражений:
- `window_w*0.5`
- `(monitor_w/2)+17`

Вероятно, хорошая идея окружить ваши выражения скобками для ясности, с разделением пробелом:
- `(monitor_w*0.5) (monitor_h*0.5)`
- `((monitor_w*0.5)+17) (monitor_h*0.2)`

### Динамические эффекты

Динамические эффекты переоцениваются каждый раз, когда изменяется свойство.

| Эффект | аргумент | Описание |
|----|-----------|---|
| persistent_size | [on] | Позволяет сохранять размер между запусками приложения для плавающих окон. |
| no_max_size | [on] | Удаляет ограничения максимального размера. Особенно полезно с окнами, которые сообщают недействительные максимальные размеры (например, winecfg). |
| stay_focused | [on] | Принудительно сохраняет фокус на окне, пока оно видимо. |
| animation | [style] ([opt]) | Принудительно применяет анимацию к окну с выбранным opt. Opt необязательный. |
| border_color | [c] | Принудительно устанавливает цвет границы окна. <br> Варианты для c: `color`/`color ... color angle` -> устанавливает активный цвет/градиент границы ИЛИ `color color`/`color ... color angle color ... color [angle]` -> устанавливает активный и неактивный цвет/градиент границы окна. См. [переменные->colors](../Variables#variable-types) для определения цвета. |
| idle_inhibit  | [mode] | Устанавливает правило подавления бездействия для окна. Если активно, приложения вроде `hypridle` не будут срабатывать. Режимы: `none`, `always`, `focus`, `fullscreen`. |
| opacity  | [a] | Дополнительный множитель прозрачности. Варианты для a: `float` -> устанавливает общую прозрачность, `float float` -> устанавливает active_opacity и inactive_opacity соответственно, `float float float` -> устанавливает active_opacity, inactive_opacity и fullscreen_opacity соответственно. |
| tag | [name] | Применяет тег `name` к окну, используйте префикс `+`/`-` для установки/снятия флага, или без префикса для переключения флага. |
| max_size | [w] [h] | Устанавливает максимальный размер (x,y -> целое число). Применяется к плавающим окнам. (используйте `misc:size_limits_tiled`, чтобы включить плиточные окна.) |
| min_size | [w] [h] | Устанавливает минимальный размер (x,y -> целое число). Применяется к плавающим окнам. (используйте `misc:size_limits_tiled`, чтобы включить плиточные окна.) |
| border_size | [int] | Устанавливает размер границы. |
| rounding | [int] | Принудительно устанавливает X пикселей скругления для приложения, игнорируя установленное по умолчанию (в `decoration:rounding`). Должно быть целым числом. |
| rounding_power | [float] | Переопределяет силу скругления для окна (см. `decoration:rounding_power`). |
| allows_input | [on] | Принудительно заставляет окно XWayland получать ввод, даже если оно запрашивает не делать этого. (Может исправить проблемы, например, когда игровые лаунчеры по какой-то причине не получают фокус) |
| dim_around | [on] | Затемняет всё вокруг окна. Обратите внимание, что это правило предназначено для плавающих окон, и его использование на плиточных окнах может привести к странному поведению. |
| decorate | [on] | (по умолчанию _true_) Рисовать ли декорации окна или нет |
| focus_on_activate | [on] | Должен ли Hyprland фокусироваться на приложении, которое запрашивает фокус (запрос `activate`). |
| keep_aspect_ratio | [on] | Сохраняет соотношение сторон при изменении размера окна с помощью мыши. |
| nearest_neighbor | [on] | Принудительно заставляет окно использовать [ближайший сосед](https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%81%D1%88%D1%82%D0%B0%D0%B1%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8F%D1%86%D0%B8%D1%8F_%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D0%BE%D0%BC_%D0%B1%D0%BB%D0%B8%D0%B6%D0%B0%D0%B9%D1%88%D0%B5%D0%B3%D0%BE_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%B0) фильтрацию. |
| no_anim | [on] | Отключает анимации для окна. |
| no_blur | [on] |  Отключает размытие для окна. |
| no_dim | [on] |  Отключает затемнение окна. |
| no_focus | [on] |  Отключает фокус для окна. |
| no_follow_mouse | [on] |  Предотвращает фокусировку окна при перемещении мыши над ним, когда установлено `input:follow_mouse=1`. |
| no_shadow | [on] |  Отключает тени для окна. |
| no_shortcuts_inhibit | [on] |  Запрещает приложению [подавлять ваши сочетания клавиш](https://wayland.app/protocols/keyboard-shortcuts-inhibit-unstable-v1). |
| no_screen_share | [on] | Скрывает окно и его всплывающие окна от демонстрации экрана, рисуя чёрные прямоугольники на их месте. Прямоугольники рисуются даже если другие окна находятся сверху. |
| no_vrr | [on] | Отключает VRR для окна. Работает только когда [`misc:vrr`](../Variables/#Misc) установлено в `2` или `3`. |
| opaque | [on] |  Принудительно делает окно непрозрачным. |
| force_rgbx | [on] |  Принудительно заставляет Hyprland игнорировать альфа-канал на всех поверхностях окна, фактически делая его _действительно, полностью 100% непрозрачным_. |
| sync_fullscreen | [on] |  Должен ли полноэкранный режим всегда совпадать с тем, который отправляется окну (вступит в силу только при следующем изменении полноэкранного режима). |
| immediate | [on] |  Принудительно разрешает окну разрыв. См. [странице Разрывов](../Tearing). |
| xray | [on] |  Устанавливает режим рентгена для размытия окна. |
| render_unfocused | [on] |  Принудительно заставляет окно думать, что оно отрисовывается, когда оно не видимо. См. также [Переменные - Misc](../Variables/#Misc) для установки `render_unfocused_fps`. |
| scroll_mouse | [float] | Принудительно заставляет окно переопределять переменную `input:scroll_factor`. |
| scroll_touchpad  | [float] | Принудительно заставляет окно переопределять переменную `input:touchpad:scroll_factor`. |

Все динамические эффекты могут быть установлены с помощью `setprop`, см. [`setprop`](../Dispatchers#setprop).

### Опции правила окна `group`

- `set` [`always`] - Открывать окно как группу.
- `new` - Сокращение для `barred set`.
- `lock` [`always`] - Заблокировать группу, в которую добавлено это окно. Используйте с `set` или
  `new` (например, `new lock`) для создания новой заблокированной группы.
- `barred` - Не группировать окно автоматически в активную незаблокированную группу.
- `deny` - Не разрешать окну быть переключенным как или добавленным в группу (см. диспетчер `denywindowfromgroup`).
- `invade` - Принудительно открывать окно в заблокированной группе.
- `override` [другие опции] - Переопределять другие правила `group`, например. Вы можете сделать все окна на определённом рабочем пространстве открываемыми как группа, и использовать `group override barred`, чтобы окна с определёнными заголовками открывались как обычные окна.
- `unset` - Очистить все правила `group`.

> [!NOTE]
> Правило `group` без опций является сокращением для `group set`.
>
> По умолчанию `set` и `lock` влияют на новые окна только один раз. Квалификатор `always` делает их всегда эффективными.

### Теги

Окна могут иметь несколько тегов, как статических, так и динамических. Динамические теги будут иметь суффикс `*`.
Вы можете проверить теги окна с помощью `hyprctl clients`.

Используйте диспетчер `tagwindow`, чтобы добавить статический тег к окну:

```bash
hyprctl dispatch tagwindow +code      # Добавить тег к текущему окну.
hyprctl dispatch tagwindow -- -code   # Удалить тег из текущего окна (используйте `--` для защиты ведущего `-`).
hyprctl dispatch tagwindow code       # Переключить тег текущего окна.

# Или вы можете пометить окна, соответствующие регулярному выражению окна:
hyprctl dispatch tagwindow +music deadbeef
hyprctl dispatch tagwindow +media title:Celluloid
```

Используйте правило `tag`, чтобы добавить динамический тег к окну:

```ini
windowrule = tag +term, match:class footclient  # Добавить динамический тег `term*` к окну footclient.
windowrule = tag term, match:class footclient   # Переключить динамический тег `term*` для окна footclient.
windowrule = tag +code, match:tag cpp           # Добавить динамический тег `code*` к окну с тегом `cpp`.

windowrule = opacity 0.8, match:tag code        # Установить прозрачность для окна с тегом `code` или `code*`.
windowrule = opacity 0.7, match:tag cpp         # Окно с тегом `cpp` будет соответствовать как `code`, так и `cpp`, последнее будет переопределять предыдущее совпадение.
windowrule = opacity 0.6, match:tag term*       # Установить прозрачность для окна с тегом `term*` только, `term` не будет соответствовать.

windowrule = tag -code, match:tag  term          # Удалить динамический тег `code*` для окна с тегом `term` или `term*`.
```

Или с помощью привязки клавиш для удобства:

```ini
bind = $mod Ctrl, 2, tagwindow, alpha_0.2
bind = $mod Ctrl, 4, tagwindow, alpha_0.4

windowrule = opacity 0.2 override, match:tag alpha_0.2
windowrule = opacity 0.4 override, match:tag alpha_0.4
```

Правило `tag` может манипулировать только динамическими тегами, а диспетчер `tagwindow` работает только со статическими тегами (то есть после вызова диспетчера динамические теги будут очищены).

### Примеры правил

```ini
# Переместить kitty в 100 100 и добавить стиль анимации
windowrule {
  name = move-kitty
  match:class = kitty

  move = 100 100
  animation = popin
}

windowrule = no_blur on, match:class firefox                                              # Отключить размытие для firefox
windowrule = move (cursor_x-(window_w*0.5)) (cursor_y-(window_h*0.5)), match:class kitty  # Переместить kitty в центр курсора
windowrule = border_color rgb(FF0000) rgb(880808), match:fullscreen 1                     # Установить цвет границы в красный, если окно полноэкранное
windowrule = border_color rgb(FFFF00), match:title .*Hyprland.*                           # Установить цвет границы в жёлтый, когда заголовок содержит Hyprland
windowrule = opacity 1.0 override 0.5 override 0.8 override, match:class kitty            # Установить прозрачность 1.0 активная, 0.5 неактивная и 0.8 полноэкранная для kitty
windowrule = match:class kitty, rounding 10                                               # Установить скругление в 10 для kitty
windowrule = match:class (pinentry-)(.*), stay_focused on                                  # Исправить потерю фокуса pinentry
```

### Примечания

Эффекты, отмеченные как _Динамические_, будут переоцениваться, если изменится соответствующее свойство
окна.<br>
Например, если определено правило, которое изменяет `border_color` окна,
когда оно плавающее, то `border_color` изменится на запрошенный цвет,
когда оно установлено в плавающее, и вернётся к цвету по умолчанию, когда оно снова будет плиточным.

Эффекты будут обрабатываться сверху вниз, где _последнее_ совпадение будет иметь
приоритет. т.е.

```ini
windowrule = opacity 0.8 0.8, match:class kitty
windowrule = opacity 0.5 0.5, match:float yes
```

Здесь все неполноэкранные окна kitty будут иметь `opacity 0.8`, кроме если
они плавающие. В противном случае у них будет `opacity 0.5`. Остальные
неполноэкранные плавающие окна будут иметь `opacity 0.5`.

```ini
windowrule = opacity 0.5 0.5, match:float true
windowrule = opacity 0.8 0.8, match:class kitty
```

Здесь все окна kitty будут иметь `opacity 0.8`, даже если они плавающие.
Остальные плавающие окна будут иметь `opacity 0.5`.

> [!NOTE]
> Прозрачность по умолчанию является ПРОИЗВЕДЕНИЕМ всех прозрачностей. Например, установка
> `active_opacity` в `0.5` и `opacity` в `0.5` приведёт к общей прозрачности
> `0.25`. <br>
> Вы можете установить прозрачности больше `1.0`, но любое произведение прозрачностей больше `1.0`
> вызовет графические артефакты. <br>
> Например, использование `0.5 * 2 = 1` нормально, но `0.5 * 4 = 2` вызовет графические артефакты. <br>
> Вы можете поместить `override` после значения прозрачности, чтобы переопределить его на точное значение
> вместо множителя.
> Например, чтобы установить активную и неактивную прозрачность в 0.8 и сделать полноэкранные окна
> полностью непрозрачными независимо от других правил прозрачности:
>
> ```ini
> windowrule = match:class kitty, opacity 0.8 override 0.8 override 1.0 override
> ```

### Динамическое включение / отключение / изменение правил

Только именованные правила могут быть динамически изменены, включены или отключены. Анонимные правила не могут быть.

Для включения или отключения используется ключевое слово `enable`:

```sh
hyprctl keyword 'windowrule[my-rule-name]:enable false'
```

Для изменения свойств может быть использован тот же синтаксис:

```sh
hyprctl keyword 'windowrule[my-rule-name]:match:class kitty'
```

_одинарные кавычки необходимы, иначе ваша оболочка может попытаться проанализировать строку_
